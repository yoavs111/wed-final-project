<!DOCTYPE html>
<html>
<head>
	<title>menu maneger</title>
	<script   src="https://code.jquery.com/jquery-2.2.4.js"   integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="   crossorigin="anonymous"></script>
	<script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
	<script>

	</script>
	<style type="text/css">
		.sectionsLine{
			border-width: 3px;

		}
	</style>
</head>
<body>

	<div id="mainPage"></div>

	<script>
//model
var menuModel = null;

function getMenuData() {
	$.ajax('http://www.elm.tools/final/yoavs/menu', {
		success: function (data) {
    	console.log(data); //{title: 'dfgf', sections: []}
    	console.log('You have ', data.sections.length, 'sections');
    	menuModel = data;
    	render(menuModel);
    }
});
}


//controller functions
function edit (){
	null;
}

// view
function render(menuModel) {
	var mainMenuPage = document.getElementById('mainPage');
	//Menu Title
	var menuTitle = document.createElement('h1');
	menuTitle.innerText = menuModel.title;
	menuTitle.id = "menuTitle";
	mainMenuPage.appendChild(menuTitle);
    //Sections
    var divSections = document.createElement('div');
    divSections.id = "sections";
    var objSections = menuModel.sections;
    for (var i = 0; i < objSections.length; i++) {
    	divSections.appendChild(renedrnameOfSection(i,objSections[i]));
    	divSections.appendChild(renderSection(i,objSections[i]));
    	var sectionsLine = document.createElement('hr');
    	sectionsLine.className = "sectionsLine";
    	divSections.appendChild(sectionsLine);
    	var brake = document.createElement('br');
    	divSections.appendChild(brake);
    }
    mainMenuPage.appendChild(divSections); 
}

function renedrnameOfSection(i,objSections) {
	var nameOfSection = document.createElement('h2');
	nameOfSection.innerText = objSections.name;
	nameOfSection.id = i;
	nameOfSection.class = "nameOfSection";
	return nameOfSection;
}

function renderSection(i,objSections) {
	var divSection = document.createElement('div');
	divSection.id = objSections.name;
	divSection.class = "divSection";
	for (var j = 0 ; j < objSections.items.length; j++) {
		divSection.appendChild(renderItem(i,j,objSections.items[j]));
	}
	return divSection;
}

function renderItem(i,j,ObjItem) {
	var divItem = document.createElement('div');
	divItem.className = "item"; 
	var line = document.createElement('hr');

	//name
	var nameOfItem = document.createElement('h3');
	nameOfItem.className = "nameOfItem";
	//nameOfItem.id = "i"+"j";?
	nameOfItem.innerText = ObjItem.name;

	//description
	var descriptionOfItem = document.createElement('p');
	descriptionOfItem.className = "descriptionOfItem";
	//descriptionOfItem.id = "i"+"j";?
	descriptionOfItem.innerText = "description :..." + ObjItem.description + ".";

	//price
	var priceOfItem = document.createElement('p');
	priceOfItem.className = "priceOfItem";
	//priceOfItem.id = "i"+"j";?
	priceOfItem.innerText ="price :..." + ObjItem.price + ".";

	divItem.appendChild(nameOfItem);
	divItem.appendChild(descriptionOfItem);
	divItem.appendChild(priceOfItem);
	divItem.appendChild(line);
	return divItem;
}


getMenuData();
</script>
&nbsp;
</body>
</html>
